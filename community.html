<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accessible Chennai - Community Support</title>
  <meta name="description" content="Connect with volunteers and fellow travelers for real-time assistance in navigating Chennai's public spaces.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <!-- AOS Animation Library -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    :root {
      --primary: #136087;
      --secondary: #0876ae;
      --accent: #f59e0b;
      --dark: #0f172a;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #0a415d;
      color: #f8fafc;
    }

    /* Reduced motion settings */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
        scroll-behavior: auto !important;
      }
    }

    /* Accessibility focus styles */
    .focusable:focus {
      outline: 3px solid rgba(255, 255, 255, 0.8);
      outline-offset: 2px;
    }

    /* Text gradient */
    .text-gradient {
      background: linear-gradient(90deg, #ffffff 0%, #e0f2fe 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Floating animation */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
    }

    .floating {
      animation: float 6s ease-in-out infinite;
    }

    /* Feature card hover effects */
    .feature-card {
      transition: all 0.3s ease;
      transform-style: preserve-3d;
    }

    .feature-card:hover {
      transform: scale(1.05) translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .feature-card:active {
      transform: scale(0.98);
    }

    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #f59e0b;
      color: white;
      padding: 8px;
      z-index: 100;
      transition: top 0.3s;
    }
    .skip-link:focus {
      top: 0;
    }

    .online-dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }

    /* Voice mode styles */
    .voice-indicator {
      position: fixed;
      top: 100px;
      right: 20px;
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      font-size: 14px;
      font-weight: bold;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
      display: none;
    }

    .voice-indicator.active {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .voice-indicator .pulse {
      width: 8px;
      height: 8px;
      background: #fff;
      border-radius: 50%;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }

    .listening {
      animation: listening-glow 2s ease-in-out infinite;
    }

    @keyframes listening-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
      50% { box-shadow: 0 0 30px rgba(16, 185, 129, 0.8); }
    }

    .voice-feedback {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
      padding: 15px 25px;
      border-radius: 25px;
      font-size: 16px;
      font-weight: bold;
      z-index: 1000;
      max-width: 80%;
      text-align: center;
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
      display: none;
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateX(-50%) translateY(100px); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }

    .voice-commands-help {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.95);
      color: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 90%;
      max-height: 80%;
      overflow-y: auto;
      z-index: 2000;
      display: none;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .voice-mode .feature-card:hover {
      transform: none;
    }

    .initials-avatar {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.75rem;
    }

    /* Tab styling */
    .tab-btn {
      transition: all 0.3s ease;
    }

    .tab-btn.active {
      background: linear-gradient(135deg, #136087, #0876ae);
      color: white;
      border-bottom: 2px solid #f59e0b;
    }

    /* Ripple effect */
    .ripple {
      position: relative;
      overflow: hidden;
    }

    .ripple::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .ripple:hover::after {
      width: 300px;
      height: 300px;
    }

    /* Glass morphism effects */
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .glass-dark {
      background: rgba(19, 96, 135, 0.2);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Skip to Content Link -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:bg-white focus:text-blue-600 focus:rounded-md focus:z-50">
    Skip to main content
  </a>

  <!-- Voice Mode Indicator -->
  <div id="voice-indicator" class="voice-indicator">
    <div class="pulse"></div>
    <span>Voice Mode Active</span>
  </div>

  <!-- Voice Feedback -->
  <div id="voice-feedback" class="voice-feedback"></div>

  <!-- Voice Commands Help -->
  <div id="voice-commands-help" class="voice-commands-help">
    <h2 class="text-2xl font-bold mb-4">Voice Commands for Community Support</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
      <div>
        <h3 class="font-bold mb-2 text-sky-400">Navigation</h3>
        <ul class="space-y-1 text-gray-300">
          <li>"Show volunteers" - View volunteer section</li>
          <li>"Show forum" - View community forum</li>
          <li>"Show help" - View help section</li>
          <li>"Go to home" - Return to homepage</li>
        </ul>
      </div>
      <div>
        <h3 class="font-bold mb-2 text-green-400">Volunteers</h3>
        <ul class="space-y-1 text-gray-300">
          <li>"Find volunteers" - Show all volunteers</li>
          <li>"Filter wheelchair" - Show wheelchair specialists</li>
          <li>"Filter visual" - Show visual impairment helpers</li>
          <li>"Filter hearing" - Show hearing impairment helpers</li>
          <li>"Filter mobility" - Show mobility assistance specialists</li>
          <li>"Request help" - Request volunteer assistance</li>
        </ul>
      </div>
      <div>
        <h3 class="font-bold mb-2 text-purple-400">Community Forum</h3>
        <ul class="space-y-1 text-gray-300">
          <li>"New post" - Create new discussion</li>
          <li>"Search discussions" - Search forum posts</li>
          <li>"Show metro posts" - Filter metro discussions</li>
          <li>"Show bus posts" - Filter bus discussions</li>
          <li>"Read discussions" - Listen to discussions</li>
          <li>"Like post" - Like a discussion</li>
          <li>"Reply post" - Reply to a discussion</li>
        </ul>
      </div>
      <div>
        <h3 class="font-bold mb-2 text-red-400">Emergency</h3>
        <ul class="space-y-1 text-gray-300">
          <li>"Emergency help" - Show emergency contacts</li>
          <li>"Call ambulance" - Call medical emergency (108)</li>
          <li>"Call police" - Call police emergency (100)</li>
        </ul>
      </div>
      <div>
        <h3 class="font-bold mb-2 text-amber-400">General</h3>
        <ul class="space-y-1 text-gray-300">
          <li>"Help" - Show this help menu</li>
          <li>"Stop listening" - Turn off voice recognition</li>
          <li>"What can I say" - List available commands</li>
          <li>"Repeat" - Repeat last announcement</li>
        </ul>
      </div>
    </div>
    <button onclick="closeVoiceHelp()" class="mt-4 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded focusable">Close</button>
  </div>

  <!-- Header with navigation -->
  <header class="bg-blue-600/20 backdrop-blur-md sticky top-0 z-50 shadow-lg">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <a href="index.html" class="flex items-center space-x-3 focusable rounded-md" data-aos="fade-right">
          <div class="w-10 h-10 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white">
              <path d="M30,20 L70,20 L80,40 L75,60 L60,80 L40,80 L25,60 L20,40 Z" fill="none" stroke="currentColor" stroke-width="2"/>
              <circle cx="50" cy="50" r="15" fill="none" stroke="currentColor" stroke-width="3"/>
              <circle cx="50" cy="50" r="5" fill="currentColor"/>
              <path d="M65,50 L80,50 M50,65 L50,80 M35,50 L20,50 M50,35 L50,20" stroke="currentColor" stroke-width="3"/>
            </svg>
          </div>
          <h1 class="text-xl font-bold text-white">Accessible<span class="text-gradient">Chennai</span></h1>
        </a>
      </div>
      
      <nav aria-label="Main navigation" data-aos="fade-left">
        <ul class="flex space-x-1">
          <li>
            <a href="index.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Home</a>
          </li>
          <li>
            <a href="alerts.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Alerts</a>
          </li>
          <li>
            <a href="navigate.html" class="px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-white/10 focusable transition-all duration-300" aria-current="page">Navigate</a>
          </li>
          <li>
            <a href="settings.html" class="px-3 py-2 rounded-md text-sm font-medium text-white/80 hover:text-white hover:bg-white/10 focusable transition-all duration-300">Settings</a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content" class="flex-grow">
    <!-- Hero Header -->
    <section aria-labelledby="hero-heading" class="relative overflow-hidden py-12 md:py-16" data-aos="fade-up">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center">
          <h1 id="hero-heading" class="text-4xl md:text-5xl font-bold leading-tight mb-6">
            <span class="text-gradient">Community Support</span> Network
          </h1>
          <p class="text-xl text-white/90 mb-8 max-w-2xl mx-auto">
            Connect with volunteers and fellow travelers for real-time assistance in navigating Chennai's public spaces.
          </p>
          <div class="flex flex-wrap justify-center gap-4">
            <button onclick="showTab('volunteers')" class="bg-white text-blue-600 px-8 py-4 rounded-full font-bold hover:bg-gray-100 focusable transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl text-lg ripple" data-aos="zoom-in" data-aos-delay="200">
              <i class="fas fa-hands-helping mr-2"></i> Find Volunteers
            </button>
            <button onclick="showTab('forum')" class="bg-white/10 backdrop-blur-md text-white px-8 py-4 rounded-full font-bold border border-white/20 hover:bg-white/20 focusable transition-all duration-300 transform hover:scale-105 text-lg" data-aos="zoom-in" data-aos-delay="300">
              <i class="fas fa-comments mr-2"></i> Community Forum
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Navigation Tabs -->
    <section class="bg-white/5 backdrop-blur-md py-4" data-aos="fade-up">
      <div class="container mx-auto px-4">
        <div class="flex justify-center border-b border-white/20">
          <button
            id="volunteers-tab"
            class="tab-btn active px-6 py-3 font-medium rounded-t-lg mr-2"
            data-tab="volunteers"
          >
            <i class="fas fa-users mr-2"></i> Volunteers
          </button>
          <button
            id="forum-tab"
            class="tab-btn px-6 py-3 font-medium text-white/70 hover:text-white hover:bg-white/10 rounded-t-lg mr-2"
            data-tab="forum"
          >
            <i class="fas fa-comments mr-2"></i> Community Forum
          </button>
          <button
            id="help-tab"
            class="tab-btn px-6 py-3 font-medium text-white/70 hover:text-white hover:bg-white/10 rounded-t-lg"
            data-tab="help"
          >
            <i class="fas fa-question-circle mr-2"></i> Get Help
          </button>
        </div>
      </div>
    </section>

    <!-- Volunteers Section -->
    <div id="volunteers" class="tab-content active">
      <section class="py-16" data-aos="fade-up">
        <div class="container mx-auto px-4">
          <div class="glass-dark p-8 rounded-3xl">
            <h2 class="text-3xl font-bold mb-8 text-center">
              <i class="fas fa-hands text-amber-400 mr-3"></i>
              <span class="text-gradient">Available Volunteers</span> in Chennai
            </h2>
            
            <!-- Filter Options -->
            <div class="mb-8">
              <h3 class="text-lg font-medium mb-4 text-center">Filter by specialization:</h3>
              <div class="flex flex-wrap justify-center gap-3">
                <button
                  data-filter="all"
                  class="filter-btn active bg-white text-blue-600 px-6 py-3 rounded-full text-sm font-medium hover:bg-gray-100 focusable transition-all duration-300"
                >
                  All Volunteers
                </button>
                <button
                  data-filter="wheelchair"
                  class="filter-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-wheelchair mr-1"></i> Wheelchair
                </button>
                <button
                  data-filter="visual"
                  class="filter-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-eye mr-1"></i> Visual
                </button>
                <button
                  data-filter="hearing"
                  class="filter-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-deaf mr-1"></i> Hearing
                </button>
                <button
                  data-filter="mobility"
                  class="filter-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-walking mr-1"></i> Mobility
                </button>
              </div>
            </div>

            <!-- Volunteer Cards Grid -->
            <div id="volunteers-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Volunteer cards will be dynamically loaded here -->
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Community Forum Section -->
    <div id="forum" class="tab-content">
      <section class="py-16" data-aos="fade-up">
        <div class="container mx-auto px-4">
          <div class="glass-dark p-8 rounded-3xl">
            <h2 class="text-3xl font-bold mb-8 text-center">
              <i class="fas fa-comments text-purple-400 mr-3"></i>
              <span class="text-gradient">Chennai Accessibility</span> Forum
            </h2>
            
            <!-- Search and New Post -->
            <div class="flex flex-col md:flex-row gap-4 mb-8 max-w-4xl mx-auto">
              <div class="flex-1 flex">
                <input
                  id="search-discussions"
                  type="text"
                  placeholder="Search discussions..."
                  class="flex-1 glass p-4 rounded-l-lg outline-none text-white placeholder-white/70 focusable"
                />
                <button id="search-btn" class="glass p-4 rounded-r-lg hover:bg-white/10 focusable transition-all duration-300" aria-label="Search discussions">
                  <i class="fas fa-search"></i>
                </button>
              </div>
              <button
                onclick="showNewPostModal()"
                class="bg-white text-blue-600 px-6 py-4 rounded-lg font-medium hover:bg-gray-100 focusable transition-all duration-300 transform hover:scale-105"
              >
                <i class="fas fa-plus mr-2"></i> New Post
              </button>
            </div>

            <!-- Discussion Categories -->
            <div class="mb-8">
              <h3 class="text-lg font-medium mb-4 text-center">Browse by category:</h3>
              <div class="flex flex-wrap justify-center gap-3">
                <button
                  data-category="all"
                  class="category-btn active bg-white text-blue-600 px-6 py-3 rounded-full text-sm font-medium hover:bg-gray-100 focusable transition-all duration-300"
                >
                  All Topics
                </button>
                <button
                  data-category="metro"
                  class="category-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-subway mr-1"></i> Metro
                </button>
                <button
                  data-category="bus"
                  class="category-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-bus mr-1"></i> Buses
                </button>
                <button
                  data-category="station"
                  class="category-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-train mr-1"></i> Stations
                </button>
                <button
                  data-category="general"
                  class="category-btn glass px-6 py-3 rounded-full text-sm font-medium text-white hover:bg-white/20 focusable transition-all duration-300"
                >
                  <i class="fas fa-comment mr-1"></i> General
                </button>
              </div>
            </div>

            <!-- Discussions List -->
            <div id="discussions-container" class="space-y-6 max-w-4xl mx-auto" aria-live="polite" aria-atomic="true" aria-relevant="additions">
              <!-- Discussions will be dynamically loaded here -->
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Get Help Section -->
    <div id="help" class="tab-content">
      <section class="py-16" data-aos="fade-up">
        <div class="container mx-auto px-4">
          <div class="glass-dark p-8 rounded-3xl">
            <h2 class="text-3xl font-bold mb-8 text-center">
              <i class="fas fa-question-circle text-amber-400 mr-3"></i>
              <span class="text-gradient">Get Immediate</span> Assistance
            </h2>
            
            <!-- Emergency Contacts -->
            <div class="mb-12">
              <h3 class="text-2xl font-bold mb-6 text-red-400 text-center">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                Emergency Contacts
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                <div class="feature-card glass p-8 rounded-xl">
                  <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-red-400 to-pink-400 rounded-full mx-auto mb-6 flex items-center justify-center">
                      <i class="fas fa-ambulance text-white text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-bold mb-3">Medical Emergency</h4>
                    <p class="text-white/80 mb-6">For urgent medical assistance in Chennai</p>
                    <button onclick="callEmergency('108')" class="w-full bg-red-600 hover:bg-red-700 text-white py-4 rounded-lg font-bold ripple focusable transition-all duration-300 transform hover:scale-105">
                      <i class="fas fa-phone-alt mr-2"></i> Call 108
                    </button>
                  </div>
                </div>

                <div class="feature-card glass p-8 rounded-xl">
                  <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full mx-auto mb-6 flex items-center justify-center">
                      <i class="fas fa-shield-alt text-white text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-bold mb-3">Police Assistance</h4>
                    <p class="text-white/80 mb-6">For safety and security emergencies</p>
                    <button onclick="callEmergency('100')" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-lg font-bold ripple focusable transition-all duration-300 transform hover:scale-105">
                      <i class="fas fa-phone-alt mr-2"></i> Call 100
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Resources -->
            <div>
              <h3 class="text-2xl font-bold mb-6 text-sky-400 text-center">
                <i class="fas fa-file-pdf mr-2"></i>
                Chennai Guide
              </h3>
              <div class="max-w-2xl mx-auto">
                <div class="feature-card glass p-8 rounded-xl">
                  <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-indigo-400 to-violet-400 rounded-full mx-auto mb-6 flex items-center justify-center">
                      <i class="fas fa-file-pdf text-white text-2xl"></i>
                    </div>
                    <h4 class="text-xl font-bold mb-3">Chennai Accessibility Guide</h4>
                    <p class="text-white/80 mb-6">Download our comprehensive accessibility guide for Chennai's public transport system</p>
                    <button onclick="downloadGuide()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-4 rounded-lg font-bold ripple focusable transition-all duration-300 transform hover:scale-105">
                      <i class="fas fa-download mr-2"></i> Download Guide
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Floating Help Button -->
  <button
    id="floating-help-btn"
    class="fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-r from-amber-400 to-orange-400 rounded-full flex items-center justify-center text-white text-2xl shadow-2xl floating focusable transition-all duration-300 transform hover:scale-110"
    aria-label="Get help"
  >
    <i class="fas fa-question"></i>
  </button>

  <!-- Help Panel -->
  <div
    id="help-panel"
    class="fixed bottom-24 right-6 glass-dark p-6 rounded-xl shadow-2xl hidden w-80 z-50"
  >
    <h3 class="text-xl font-bold mb-4 flex items-center text-amber-400">
      <i class="fas fa-life-ring mr-2"></i>
      Quick Help
    </h3>
    <p class="text-white/80 mb-4">How can we assist you today?</p>
    <div class="space-y-3">
      <button
        onclick="showTab('volunteers')"
        class="w-full text-left glass p-3 rounded-lg hover:bg-white/10 transition-all duration-300 flex items-center focusable"
      >
        <i class="fas fa-users text-sky-400 mr-3"></i>
        <span>Find a Volunteer</span>
      </button>
      <button
        onclick="showTab('forum')"
        class="w-full text-left glass p-3 rounded-lg hover:bg-white/10 transition-all duration-300 flex items-center focusable"
      >
        <i class="fas fa-comments text-purple-400 mr-3"></i>
        <span>Ask the Community</span>
      </button>
      <button
        onclick="showTab('help')"
        class="w-full text-left glass p-3 rounded-lg hover:bg-white/10 transition-all duration-300 flex items-center focusable"
      >
        <i class="fas fa-phone-alt text-green-400 mr-3"></i>
        <span>Emergency Contacts</span>
      </button>
    </div>
  </div>

  <!-- Request Volunteer Modal -->
  <div
    id="request-modal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
  >
    <div class="glass-dark p-8 rounded-xl max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold" id="modal-title">Request Volunteer Assistance</h3>
        <button
          onclick="closeRequestModal()"
          class="text-gray-400 hover:text-white focusable"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="request-form">
        <div class="mb-4">
          <label for="request-name" class="block text-white/80 mb-2">Your Name</label>
          <input
            type="text"
            id="request-name"
            class="w-full glass p-3 rounded-lg outline-none text-white placeholder-white/70 focusable"
            required
          />
        </div>
        <div class="mb-4">
          <label for="request-contact" class="block text-white/80 mb-2"
            >Contact Method</label
          >
          <select
            id="request-contact"
            class="w-full glass p-3 rounded-lg outline-none text-white focusable"
            required
          >
            <option value="">Select contact method</option>
            <option value="phone">Phone Call</option>
            <option value="whatsapp">WhatsApp</option>
            <option value="sms">Text Message</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="request-details" class="block text-white/80 mb-2"
            >What do you need help with?</label
          >
          <textarea
            id="request-details"
            rows="4"
            class="w-full glass p-3 rounded-lg outline-none text-white placeholder-white/70 focusable"
            required
          ></textarea>
        </div>
        <button
          type="submit"
          class="w-full bg-white text-blue-600 py-3 rounded-lg font-bold ripple focusable transition-all duration-300 transform hover:scale-105"
        >
          <i class="fas fa-paper-plane mr-2"></i> Send Request
        </button>
      </form>
    </div>
  </div>

  <!-- New Post Modal -->
  <div
    id="new-post-modal"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
  >
    <div class="glass-dark p-8 rounded-xl max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold">New Community Post</h3>
        <button
          onclick="closeNewPostModal()"
          class="text-gray-400 hover:text-white focusable"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="new-post-form">
        <div class="mb-4">
          <label for="post-title" class="block text-white/80 mb-2">Title</label>
          <input
            type="text"
            id="post-title"
            class="w-full glass p-3 rounded-lg outline-none text-white placeholder-white/70 focusable"
            placeholder="What's your question?"
            required
          />
        </div>
        <div class="mb-4">
          <label for="post-category" class="block text-white/80 mb-2">Category</label>
          <select
            id="post-category"
            class="w-full glass p-3 rounded-lg outline-none text-white focusable"
            required
          >
            <option value="general">General Discussion</option>
            <option value="metro">Metro Accessibility</option>
            <option value="bus">Bus Accessibility</option>
            <option value="station">Station Accessibility</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="post-content" class="block text-white/80 mb-2">Details</label>
          <textarea
            id="post-content"
            rows="5"
            class="w-full glass p-3 rounded-lg outline-none text-white placeholder-white/70 focusable"
            placeholder="Describe your question or share your experience..."
            required
          ></textarea>
        </div>
        <button
          type="submit"
          class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-lg font-bold ripple focusable transition-all duration-300 transform hover:scale-105"
        >
          <i class="fas fa-share mr-2"></i> Post to Community
        </button>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-blue-600/20 backdrop-blur-md text-white py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">Accessible Chennai</h3>
          <p class="text-white/80">
            Empowering inclusive mobility through technology and community collaboration.
          </p>
          <div class="flex space-x-4 mt-4">
            <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300" aria-label="Facebook">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300" aria-label="Twitter">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300" aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>
        
        <div>
          <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Developer Guide</a></li>
            <li><a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Privacy Policy</a></li>
            <li><a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Terms of Service</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="text-lg font-semibold mb-4">Resources</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">API Documentation</a></li>
            <li><a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Accessibility Guidelines</a></li>
            <li><a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Transit Maps</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="text-lg font-semibold mb-4">Contact</h4>
          <address class="not-italic text-white/80 space-y-2">
            <p>123 Accessibility Lane</p>
            <p>Chennai, Tamil Nadu 600001</p>
            <p>Email: <a href="mailto:info@accessiblechennai.in" class="hover:text-white focusable transition-all duration-300">info@accessiblechennai.in</a></p>
            <p>Phone: <a href="tel:+914412345678" class="hover:text-white focusable transition-all duration-300">+91 44 1234 5678</a></p>
          </address>
        </div>
      </div>
      
      <div class="border-t border-white/20 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-white/80 mb-4 md:mb-0">
          &copy; 2024 Accessible Chennai. All rights reserved.
        </p>
        <div class="flex space-x-4">
          <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Accessibility Statement</a>
          <a href="#" class="text-white/80 hover:text-white focusable transition-all duration-300">Feedback</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- AOS Animation Library -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Voice Navigation System
    class VoiceNavigator {
      constructor() {
        this.recognition = null;
        this.isListening = false;
        this.isVoiceMode = false;
        this.lastSpokenText = '';
        this.currentSection = 'volunteers';
        this.synthesis = window.speechSynthesis;
        
        this.initializeVoiceRecognition();
        this.checkVoiceMode();
        this.setupVoiceControls();
      }

      checkVoiceMode() {
        // Check if voice mode was enabled from settings
        const voiceMode = localStorage && localStorage.getItem('voiceNavigationEnabled') === 'true';
        if (voiceMode) {
          this.enableVoiceMode();
        }
      }

      initializeVoiceRecognition() {
        if ('webkitSpeechRecognition' in window) {
          this.recognition = new webkitSpeechRecognition();
          this.recognition.continuous = true;
          this.recognition.interimResults = false;
          this.recognition.lang = 'en-US';
          
          this.recognition.onresult = (event) => {
            const command = event.results[event.results.length - 1][0].transcript.toLowerCase().trim();
            this.processVoiceCommand(command);
          };
          
          this.recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            if (event.error === 'no-speech') {
              this.startListening();
            }
          };
          
          this.recognition.onend = () => {
            if (this.isVoiceMode && this.isListening) {
              this.startListening();
            }
          };
        }
      }

      enableVoiceMode() {
        this.isVoiceMode = true;
        document.body.classList.add('voice-mode');
        const indicator = document.getElementById('voice-indicator');
        if (indicator) indicator.classList.add('active');
        
        this.startListening();
        this.speak("Voice navigation activated for Community Support. Say 'help' to hear available commands.");
      }

      startListening() {
        if (this.recognition && this.isVoiceMode) {
          this.isListening = true;
          const indicator = document.getElementById('voice-indicator');
          if (indicator) indicator.classList.add('listening');
          try {
            this.recognition.start();
          } catch (e) {
            console.error('Recognition start error:', e);
          }
        }
      }

      stopListening() {
        this.isListening = false;
        const indicator = document.getElementById('voice-indicator');
        if (indicator) indicator.classList.remove('listening');
        if (this.recognition) {
          this.recognition.stop();
        }
      }

      speak(text) {
        this.lastSpokenText = text;
        this.synthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.9;
        utterance.pitch = 1;
        utterance.volume = 1;
        
        this.showVoiceFeedback(text);
        this.synthesis.speak(utterance);
      }

      showVoiceFeedback(text) {
        const feedback = document.getElementById('voice-feedback');
        if (feedback) {
          feedback.textContent = text;
          feedback.style.display = 'block';
          
          setTimeout(() => {
            feedback.style.display = 'none';
          }, 3000);
        }
      }

      processVoiceCommand(command) {
        console.log('Voice command:', command);
        
        // Navigation commands
        if (command.includes('show volunteers') || command.includes('find volunteers')) {
          this.navigateToSection('volunteers');
        } else if (command.includes('show forum') || command.includes('community forum')) {
          this.navigateToSection('forum');
        } else if (command.includes('show help') || command.includes('get help') || command.includes('emergency help')) {
          this.navigateToSection('help');
        } else if (command.includes('go to home') || command.includes('go home')) {
          window.location.href = 'index.html';
        }
        
        // Volunteer filtering commands
        else if (command.includes('filter wheelchair') || command.includes('wheelchair volunteers')) {
          this.filterVolunteers('wheelchair');
        } else if (command.includes('filter visual') || command.includes('visual impairment')) {
          this.filterVolunteers('visual');
        } else if (command.includes('filter hearing') || command.includes('hearing impairment')) {
          this.filterVolunteers('hearing');
        } else if (command.includes('filter mobility') || command.includes('mobility volunteers')) {
          this.filterVolunteers('mobility');
        } else if (command.includes('all volunteers') || command.includes('show all')) {
          this.filterVolunteers('all');
        }
        
        // Request help commands
        else if (command.includes('request help') || command.includes('need help')) {
          this.requestVolunteerHelp();
        }
        
        // Forum commands
        else if (command.includes('new post') || command.includes('create post')) {
          this.createNewPost();
        } else if (command.includes('search discussions') || command.includes('search forum')) {
          this.searchDiscussions();
        } else if (command.includes('show metro') || command.includes('metro posts')) {
          this.filterDiscussions('metro');
        } else if (command.includes('show bus') || command.includes('bus posts')) {
          this.filterDiscussions('bus');
        } else if (command.includes('show station') || command.includes('station posts')) {
          this.filterDiscussions('station');
        } else if (command.includes('show general') || command.includes('general posts')) {
          this.filterDiscussions('general');
        } else if (command.includes('read discussions') || command.includes('read posts')) {
          this.readDiscussions();
        } else if (command.includes('like post') || command.includes('like discussion')) {
          this.likeDiscussion();
        } else if (command.includes('reply post') || command.includes('reply discussion')) {
          this.replyToDiscussion();
        }
        
        // Emergency commands
        else if (command.includes('call ambulance') || command.includes('medical emergency')) {
          this.callEmergency('108');
        } else if (command.includes('call police') || command.includes('police emergency')) {
          this.callEmergency('100');
        }
        
        // General commands
        else if (command.includes('help') || command.includes('what can i say') || command.includes('commands')) {
          this.showVoiceHelp();
        } else if (command.includes('repeat') || command.includes('say again')) {
          this.speak(this.lastSpokenText);
        } else if (command.includes('stop listening') || command.includes('disable voice')) {
          this.disableVoiceMode();
        }
        
        // Unknown command
        else {
          this.speak("I didn't understand that command. Say 'help' to hear available commands.");
        }
      }

      navigateToSection(section) {
        showTab(section);
        this.currentSection = section;
        
        const sectionNames = {
          'volunteers': 'volunteers section',
          'forum': 'community forum',
          'help': 'help and emergency contacts'
        };
        
        this.speak(`Showing ${sectionNames[section]}`);
      }

      filterVolunteers(filter) {
        if (this.currentSection !== 'volunteers') {
          this.navigateToSection('volunteers');
        }
        
        filterVolunteers(filter);
        
        const filterNames = {
          'all': 'all volunteers',
          'wheelchair': 'wheelchair accessibility specialists',
          'visual': 'visual impairment helpers',
          'hearing': 'hearing impairment helpers',
          'mobility': 'mobility assistance specialists'
        };
        
        this.speak(`Showing ${filterNames[filter]}`);
      }

      filterDiscussions(category) {
        if (this.currentSection !== 'forum') {
          this.navigateToSection('forum');
        }
        
        filterDiscussions(category);
        
        const categoryNames = {
          'metro': 'metro accessibility discussions',
          'bus': 'bus accessibility discussions',
          'station': 'station accessibility discussions',
          'general': 'general discussions'
        };
        
        this.speak(`Showing ${categoryNames[category]}`);
      }

      requestVolunteerHelp() {
        if (this.currentSection !== 'volunteers') {
          this.navigateToSection('volunteers');
        }
        
        openRequestModal('available volunteer');
        this.speak("Opening volunteer request form. Please fill in your details.");
      }

      createNewPost() {
        if (this.currentSection !== 'forum') {
          this.navigateToSection('forum');
        }
        
        showNewPostModal();
        this.speak("Opening new post form. Share your question or experience with the community.");
      }

      searchDiscussions() {
        if (this.currentSection !== 'forum') {
          this.navigateToSection('forum');
        }
        
        const searchInput = document.getElementById('search-discussions');
        if (searchInput) {
          searchInput.focus();
          this.speak("Search box focused. Type your search term and press enter.");
        }
      }

      readDiscussions() {
        if (this.currentSection !== 'forum') {
          this.navigateToSection('forum');
        }
        
        const discussions = Array.from(document.querySelectorAll('#discussions-container .glass'));
        if (discussions.length > 0) {
          let text = `Reading ${discussions.length} discussions. `;
          discussionsData.slice(0, 3).forEach((discussion, index) => {
            text += `Discussion ${index + 1}: ${discussion.title} by ${discussion.author}. ${discussion.content}. `;
          });
          this.speak(text);
        } else {
          this.speak("No discussions found.");
        }
      }

      likeDiscussion() {
        if (this.currentSection !== 'forum') {
          this.navigateToSection('forum');
        }
        
        const discussions = Array.from(document.querySelectorAll('#discussions-container .glass'));
        if (discussions.length > 0) {
          this.speak("Please say the number of the discussion you want to like.");
          this.recognition.stop();
          
          const listener = new webkitSpeechRecognition();
          listener.lang = 'en-US';
          listener.interimResults = false;
          listener.maxAlternatives = 1;
          
          listener.onresult = (e) => {
            const number = parseInt(e.results[0][0].transcript);
            if (!isNaN(number) && number > 0 && number <= discussions.length) {
              addLike(discussionsData[number-1].id);
            } else {
              this.speak("Invalid discussion number. Please try again.");
            }
            this.startListening();
          };
          
          listener.start();
        } else {
          this.speak("No discussions available to like.");
        }
      }

      replyToDiscussion() {
        if (this.currentSection !== 'forum') {
          this.navigateToSection('forum');
        }
        
        const discussions = Array.from(document.querySelectorAll('#discussions-container .glass'));
        if (discussions.length > 0) {
          this.speak("Please say the number of the discussion you want to reply to.");
          this.recognition.stop();
          
          const listener = new webkitSpeechRecognition();
          listener.lang = 'en-US';
          listener.interimResults = false;
          listener.maxAlternatives = 1;
          
          listener.onresult = (e) => {
            const number = parseInt(e.results[0][0].transcript);
            if (!isNaN(number) && number > 0 && number <= discussions.length) {
              addReply(discussionsData[number-1].id);
            } else {
              this.speak("Invalid discussion number. Please try again.");
            }
            this.startListening();
          };
          
          listener.start();
        } else {
          this.speak("No discussions available to reply to.");
        }
      }

      callEmergency(number) {
        this.speak(`Calling emergency number ${number}`);
        setTimeout(() => {
          window.location.href = `tel:${number}`;
        }, 1000);
      }

      showVoiceHelp() {
        const helpModal = document.getElementById('voice-commands-help');
        if (helpModal) {
          helpModal.style.display = 'block';
          this.speak("Voice commands help is now displayed. You can navigate volunteers, forum, emergency contacts, and more using voice commands.");
        }
      }

      disableVoiceMode() {
        this.isVoiceMode = false;
        this.stopListening();
        document.body.classList.remove('voice-mode');
        const indicator = document.getElementById('voice-indicator');
        if (indicator) indicator.classList.remove('active');
        if (localStorage) localStorage.setItem('voiceNavigationEnabled', 'false');
        this.speak("Voice navigation disabled");
      }

      setupVoiceControls() {
        // Keyboard shortcut to toggle voice mode
        document.addEventListener('keydown', (e) => {
          if (e.ctrlKey && e.key === 'v') {
            e.preventDefault();
            if (this.isVoiceMode) {
              this.disableVoiceMode();
            } else {
              this.enableVoiceMode();
            }
          }
        });
      }
    }

    // Initialize voice navigation
    const voiceNav = new VoiceNavigator();

    // Close voice help function
    function closeVoiceHelp() {
      const helpModal = document.getElementById('voice-commands-help');
      if (helpModal) {
        helpModal.style.display = 'none';
        if (voiceNav.isVoiceMode) {
          voiceNav.speak("Voice commands help closed");
        }
      }
    }

    // DOM Elements
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    const filterBtns = document.querySelectorAll('.filter-btn');
    const categoryBtns = document.querySelectorAll('.category-btn');
    const floatingHelpBtn = document.getElementById('floating-help-btn');
    const helpPanel = document.getElementById('help-panel');
    const requestModal = document.getElementById('request-modal');
    const newPostModal = document.getElementById('new-post-modal');
    const requestForm = document.getElementById('request-form');
    const newPostForm = document.getElementById('new-post-form');
    const volunteersContainer = document.getElementById('volunteers-container');
    const discussionsContainer = document.getElementById('discussions-container');

    // Sample volunteers data
    const volunteersData = [
      {
        id: 1,
        name: "Priya Sharma",
        initials: "PS",
        location: "T. Nagar",
        rating: 4.9,
        helped: 127,
        responseTime: "5 mins",
        online: true,
        specializations: ["wheelchair", "metro", "navigation"],
      },
      {
        id: 2,
        name: "Rajesh Kumar",
        initials: "RK",
        location: "Nungambakkam",
        rating: 4.7,
        helped: 89,
        responseTime: "10 mins",
        online: true,
        specializations: ["visual", "bus", "navigation"],
      },
      {
        id: 3,
        name: "Ananya Patel",
        initials: "AP",
        location: "Adyar",
        rating: 4.8,
        helped: 64,
        responseTime: "15 mins",
        online: false,
        specializations: ["hearing", "metro", "station"],
      },
      {
        id: 4,
        name: "Vikram Singh",
        initials: "VS",
        location: "Anna Nagar",
        rating: 4.5,
        helped: 42,
        responseTime: "20 mins",
        online: true,
        specializations: ["mobility", "bus", "station"],
      }
    ];

    // Sample discussions data
    let discussionsData = [
      {
        id: 1,
        title: "Wheelchair access at Chennai Central?",
        author: "Arun",
        category: "station",
        replies: 5,
        likes: 12,
        time: "2 hours ago",
        content: "Has anyone used the wheelchair facilities at Chennai Central recently? How accessible is it?",
      },
      {
        id: 2,
        title: "Best accessible route from T. Nagar to Airport",
        author: "Meena",
        category: "metro",
        replies: 8,
        likes: 15,
        time: "1 day ago",
        content: "Looking for recommendations for the most accessible route from T. Nagar to the airport with a wheelchair user.",
      },
      {
        id: 3,
        title: "MTC low-floor bus availability",
        author: "Karthik",
        category: "bus",
        replies: 3,
        likes: 7,
        time: "3 days ago",
        content: "Does anyone know the schedule for low-floor buses on route 21G? The app doesn't show accessibility info.",
      },
      {
        id: 4,
        title: "General accessibility improvements",
        author: "Deepa",
        category: "general",
        replies: 12,
        likes: 24,
        time: "1 week ago",
        content: "What accessibility improvements would you like to see in Chennai's public transport system?",
      }
    ];

    // Tab switching
    function showTab(tabId) {
      tabBtns.forEach(btn => {
        btn.classList.remove('active');
        btn.classList.add('text-white/70');
      });
      const activeTab = document.querySelector(`[data-tab="${tabId}"]`);
      if (activeTab) {
        activeTab.classList.add('active');
        activeTab.classList.remove('text-white/70');
      }
      
      tabContents.forEach(content => content.classList.remove('active'));
      const activeContent = document.getElementById(tabId);
      if (activeContent) activeContent.classList.add('active');
      
      // Close help panel when switching tabs
      if (helpPanel) helpPanel.classList.add('hidden');
    }

    // Render volunteers with initials
    function renderVolunteers(data) {
      if (!volunteersContainer) return;
      
      volunteersContainer.innerHTML = data.map(v => `
        <div class="feature-card glass p-6 rounded-xl flex gap-6 items-center" data-aos="fade-up">
          <div class="w-16 h-16 rounded-full bg-gradient-to-r from-sky-400 to-cyan-400 border-4 border-white/20 flex items-center justify-center text-white font-bold text-xl">
            ${v.initials}
          </div>
          <div class="flex-1">
            <h4 class="text-xl font-bold mb-2 flex items-center">
              ${v.name} 
              ${v.online ? '<span class="online-dot bg-green-400 ml-2"></span>' : '<span class="online-dot bg-gray-400 ml-2"></span>'}
            </h4>
            <p class="text-white/80 mb-2">${v.location} &middot; <span class="font-semibold text-sky-400">${v.responseTime} response</span></p>
            <p class="text-sm text-white/70 mb-3">Helped: ${v.helped} &middot; Rating: ${v.rating} </p>
            <div class="flex flex-wrap gap-2 mb-4">
              ${v.specializations.map(s => `<span class="px-3 py-1 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-xs font-medium">${s}</span>`).join('')}
            </div>
            <button onclick="openRequestModal('${v.name}')" class="bg-white text-blue-600 px-6 py-2 rounded-lg font-medium ripple focusable transition-all duration-300 transform hover:scale-105">
              <i class="fas fa-paper-plane mr-2"></i> Request Help
            </button>
          </div>
        </div>
      `).join('');
    }

    // Filter volunteers based on specialization
    function filterVolunteers(filter) {
      let filtered = volunteersData;
      if (filter !== 'all') {
        filtered = volunteersData.filter(v => v.specializations.includes(filter));
      }
      renderVolunteers(filtered);
      
      // Update filter button styles
      filterBtns.forEach(btn => {
        btn.classList.remove('bg-white', 'text-blue-600');
        btn.classList.add('glass', 'text-white');
      });
      const activeFilter = document.querySelector(`[data-filter="${filter}"]`);
      if (activeFilter) {
        activeFilter.classList.remove('glass', 'text-white');
        activeFilter.classList.add('bg-white', 'text-blue-600');
      }
    }

    // Render discussions with initials and functional buttons
    function renderDiscussions(data) {
      if (!discussionsContainer) return;
      
      discussionsContainer.innerHTML = data.map(d => `
        <div class="feature-card glass p-6 rounded-xl flex gap-4" data-aos="fade-up">
          <div class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-400 to-pink-400 border-2 border-white/20 flex items-center justify-center text-white font-bold text-lg">
            ${d.author.split(' ').map(n => n[0]).join('')}
          </div>
          <div class="flex-1">
            <h4 class="text-xl font-bold mb-2">${d.title}</h4>
            <p class="text-white/80 mb-2">${d.author} &middot; <span class="text-sm text-white/60">${d.time}</span></p>
            <p class="text-white/70 mb-4">${d.content}</p>
            <div class="flex gap-6 text-sm text-white/60">
              <button onclick="addReply(${d.id})" class="hover:text-purple-400 focusable transition-all duration-300 flex items-center">
                <i class="fas fa-reply mr-1"></i> ${d.replies} replies
              </button>
              <button onclick="addLike(${d.id})" class="hover:text-purple-400 focusable transition-all duration-300 flex items-center">
                <i class="fas fa-thumbs-up mr-1"></i> ${d.likes} likes
              </button>
              <span class="px-3 py-1 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-medium">${d.category}</span>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Filter discussions based on category
    function filterDiscussions(category) {
      let filtered = discussionsData;
      if (category !== 'all') {
        filtered = discussionsData.filter(d => d.category === category);
      }
      renderDiscussions(filtered);
      
      // Update category button styles
      categoryBtns.forEach(btn => {
        btn.classList.remove('bg-white', 'text-blue-600');
        btn.classList.add('glass', 'text-white');
      });
      const activeCategory = document.querySelector(`[data-category="${category}"]`);
      if (activeCategory) {
        activeCategory.classList.remove('glass', 'text-white');
        activeCategory.classList.add('bg-white', 'text-blue-600');
      }
    }

    // Add reply function
    function addReply(id) {
      const discussion = discussionsData.find(d => d.id === id);
      if (discussion) {
        discussion.replies++;
        renderDiscussions(discussionsData);
        if (voiceNav.isVoiceMode) {
          voiceNav.speak(`Reply added to discussion ${discussion.title}`);
        }
      }
    }

    // Add like function
    function addLike(id) {
      const discussion = discussionsData.find(d => d.id === id);
      if (discussion) {
        discussion.likes++;
        renderDiscussions(discussionsData);
        if (voiceNav.isVoiceMode) {
          voiceNav.speak(`You liked discussion ${discussion.title}`);
        }
      }
    }

    // Floating help button toggle
    function toggleHelpPanel() {
      if (helpPanel) {
        helpPanel.classList.toggle('hidden');
      }
    }

    // Open Request Modal
    function openRequestModal(volunteerName) {
      if (requestModal) {
        requestModal.classList.remove('hidden');
        const modalTitle = document.getElementById('modal-title');
        if (modalTitle) {
          modalTitle.textContent = `Request Assistance from ${volunteerName}`;
        }
      }
    }

    // Close Request Modal
    function closeRequestModal() {
      if (requestModal) {
        requestModal.classList.add('hidden');
      }
    }

    // Show New Post Modal
    function showNewPostModal() {
      if (newPostModal) {
        newPostModal.classList.remove('hidden');
      }
    }

    // Close New Post Modal
    function closeNewPostModal() {
      if (newPostModal) {
        newPostModal.classList.add('hidden');
      }
    }

    // Phone call for emergency
    function callEmergency(number) {
      if (voiceNav.isVoiceMode) {
        voiceNav.callEmergency(number);
      } else {
        window.location.href = `tel:${number}`;
      }
    }

    // Download guide stub
    function downloadGuide() {
      // Create a simple PDF download simulation
      const link = document.createElement('a');
      link.href = 'data:application/pdf;base64,JVBERi0xLjQKJdPr6eEKMSAwIG9iago8PAovVGl0bGUgKENoZW5uYWkgQWNjZXNzaWJpbGl0eSBHdWlkZSkKL0NyZWF0b3IgKEFjY2Vzc2libGUgQ2hlbm5haSkKL1Byb2R1Y2VyIChBY2Nlc3NpYmxlIENoZW5uYWkpCi9DcmVhdGlvbkRhdGUgKEQ6MjAyNDEyMTApCj4+CmVuZG9iagp4cmVmCjAgMAp0cmFpbGVyCjw8Ci9TaXplIDAKL1Jvb3QgMSAwIFIKPj4Kc3RhcnR4cmVmCjEwOQolJUVPRgo=';
      link.download = 'chennai_accessibility_guide.pdf';
      link.click();
    }

    // Initialize AOS animations
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize AOS animation library
      AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true,
        mirror: false
      });

      // Tab buttons click event binding
      tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          showTab(btn.dataset.tab);
        });
      });

      // Volunteer filter buttons click event binding
      filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          filterVolunteers(btn.dataset.filter);
        });
      });

      // Category filter buttons click event binding
      categoryBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          filterDiscussions(btn.dataset.category);
        });
      });

      // Floating help button click event
      if (floatingHelpBtn) {
        floatingHelpBtn.addEventListener('click', toggleHelpPanel);
      }

      // Request form submission
      if (requestForm) {
        requestForm.addEventListener('submit', (e) => {
          e.preventDefault();
          alert('Request sent successfully! A volunteer will contact you soon.');
          closeRequestModal();
          requestForm.reset();
          
          if (voiceNav.isVoiceMode) {
            voiceNav.speak("Request sent successfully! A volunteer will contact you soon.");
          }
        });
      }

      // New post form submission
      if (newPostForm) {
        newPostForm.addEventListener('submit', (e) => {
          e.preventDefault();
          const newDiscussion = {
            id: discussionsData.length + 1,
            title: document.getElementById('post-title').value,
            author: "You",
            category: document.getElementById('post-category').value,
            replies: 0,
            likes: 0,
            time: "Just now",
            content: document.getElementById('post-content').value,
          };
          
          discussionsData.unshift(newDiscussion);
          renderDiscussions(discussionsData);
          closeNewPostModal();
          newPostForm.reset();
          showTab('forum');
          
          if (voiceNav.isVoiceMode) {
            voiceNav.speak("Your post has been added to the community forum successfully!");
          }
        });
      }

      // Search functionality
      const searchBtn = document.getElementById('search-btn');
      if (searchBtn) {
        searchBtn.addEventListener('click', () => {
          const searchTerm = document.getElementById('search-discussions').value.toLowerCase();
          const filtered = discussionsData.filter(d => 
            d.title.toLowerCase().includes(searchTerm) || 
            d.content.toLowerCase().includes(searchTerm)
          );
          renderDiscussions(filtered);
          
          if (voiceNav.isVoiceMode) {
            voiceNav.speak(`Found ${filtered.length} discussions matching your search.`);
          }
        });
      }

      // Close modals when clicking outside
      window.addEventListener('click', (e) => {
        if (e.target === requestModal) {
          closeRequestModal();
        }
        if (e.target === newPostModal) {
          closeNewPostModal();
        }
      });

      // Initialize the page content
      renderVolunteers(volunteersData);
      renderDiscussions(discussionsData);

      // Announce page load if in voice mode
      setTimeout(() => {
        if (voiceNav.isVoiceMode) {
          voiceNav.speak("Community Support page loaded. You can find volunteers, browse forum discussions, or get emergency help. Say 'help' for voice commands.");
        }
      }, 1000);

      // Reduced motion preference
      const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduceMotion) {
        document.documentElement.style.scrollBehavior = 'auto';
        document.querySelectorAll('[data-aos]').forEach(el => {
          el.removeAttribute('data-aos');
        });
      }
    });
  </script>
</body>
</html>